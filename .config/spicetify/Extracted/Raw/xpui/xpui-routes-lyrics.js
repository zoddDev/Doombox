(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{BgoQ:function(e,c,t){"use strict";t.r(c),t.d(c,"LyricsContainer",(function(){return B}));var r=t("mXGw"),a=t.n(r),s=t("/m4v"),n=t("MNHa"),i=t("eI+U");const l=[i.aubergine,i.azure,i.bole,i.brightRed,i.chocolate,i.forest,i.fuchsia,i.gold,i.kleinBlue,i.lavender,i.maroon,i.midnight,i.orange,i.royalBlue,i.salmon,i.spearmint,i.tan,i.tangerine,i.violet],o=(e=1)=>l[Math.floor(Math.random()*l.length)]+Math.round(255*e).toString(16);var b=t("Ufk0"),u=t("KluX"),d=t.n(u),y=t("OvAC"),f=t.n(y),m=t("54GF"),g=t.n(m),v=t("HwvQ"),O=t("hGjs"),p=t("zrZJ");function j(e,c){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);c&&(r=r.filter((function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var c=1;c<arguments.length;c++){var t=null!=arguments[c]?arguments[c]:{};c%2?j(Object(t),!0).forEach((function(c){f()(e,c,t[c])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(c){Object.defineProperty(e,c,Object.getOwnPropertyDescriptor(t,c))}))}return e}const E={start:0,end:1,text:""},h={"--line-count":3},k=a.a.memo(({lyrics:e=[],provider:c,trackUri:t})=>{const[s,n]=Object(r.useState)(0),i=Object(r.useRef)(0),l=Object(r.useRef)(!1);(e=>{const c=Object(r.useRef)();c.current=e,Object(r.useEffect)(()=>{const e=p.a.subscribe("position",e=>{var t;null===(t=c.current)||void 0===t||t.call(c,e)});return()=>{p.a.unsubscribe(e)}},[c])})(e=>n(e));const o=Object(r.useMemo)(()=>[E,E,...e].map((e,c)=>L(L({},e),{},{lineNumber:c})),[e]),b=o.findIndex(({start:e,end:c})=>s>=e&&s<c),u=Object(r.useMemo)(()=>{const e=Math.max(b-1,0);return o.slice(e,e+3+2)},[b,o]);return Object(r.useEffect)(()=>{l.current=!1,i.current=0},[e]),Object(r.useEffect)(()=>{if(!l.current&&(i.current=u.reduce((e,{text:c,lineNumber:t})=>{const r=c.length>1?c.length:0;return e+=b===t?r:0},i.current),i.current>=150)){Object(v.a)().log(g()({lyrics_format:"card",track_uri:t})),l.current=!0}},[u,b,t]),a.a.createElement("div",{className:d.a.SyncedLyricsPage,style:h},a.a.createElement("div",{className:d.a.SyncedLyrics},u.map(({text:e,lineNumber:c},t)=>{const r={"--animation-index":t};return a.a.createElement("p",{className:d.a.LyricsLine,style:r,key:c},e)})),c&&a.a.createElement("p",{className:d.a.Provider},O.b.get("lyrics.providedBy",c)))});var N=t("fwHE"),P=t("CNRc");const U=a.a.memo(({lyrics:e=[],provider:c,trackUri:t})=>{const[s,n]=Object(r.useState)(0),i=Object(r.useRef)(!1),l=Object(r.useRef)([]),o=Object(r.useCallback)((e,c)=>{c.unobserve(e);const t=e.target.textContent;t.length>1&&n(e=>e+t.length)},[]);return Object(N.a)({callback:o,target:l}),Object(r.useEffect)(()=>{if(!i.current&&s>=150){Object(v.a)().log(g()({lyrics_format:"fullscreen",track_uri:t})),i.current=!0}},[s,t]),a.a.createElement("div",{className:d.a.UnsyncedLyricsPage},a.a.createElement(P.a.p,{variant:P.b.ballad,className:d.a.LyricsUnsyncedMessage},O.b.get("lyrics.unsynced")),a.a.createElement("div",{className:d.a.UnsyncedLyrics},e.map(({text:e},c)=>a.a.createElement("p",{className:d.a.LyricsLine,key:c,ref:e=>{e&&(l.current[c]=e)}},e))),c&&a.a.createElement("p",{className:d.a.Provider},O.b.get("lyrics.providedBy",c)))}),w=[O.b.get("lyrics.noLyrics0"),O.b.get("lyrics.noLyrics1"),O.b.get("lyrics.noLyrics2"),O.b.get("lyrics.noLyrics3")],M=a.a.memo(()=>{const e=w[Math.floor(Math.random()*w.length)];return a.a.createElement("div",{className:d.a.LyricsUnavailablePage},a.a.createElement("span",{className:d.a.LyricsUnavailableMessage},e))});var S=t("7A1p"),_=t("zcjE");const x=a.a.createElement("div",{className:d.a.Loading},a.a.createElement(b.a,null)),B=()=>{const e=Object(s.d)(S.c),c=(null==e?void 0:e.uri)||"",{status:t,data:i}=Object(n.b)(c),l=Object(r.useMemo)(o,[c]),[b]=Object(s.d)(S.d);Object(n.b)((null==b?void 0:b.uri)||"");let u=x;if(c)if(t===_.LyricsTrackStatus.UNAVAILABLE)u=a.a.createElement(M,null);else if(t===_.LyricsTrackStatus.LOADED&&i){const{lyrics:e,provider:t,isTimeSynced:r}=i;u=r?a.a.createElement(k,{trackUri:c,lyrics:e,provider:t}):a.a.createElement(U,{trackUri:c,lyrics:e,provider:t})}return a.a.createElement("div",{className:d.a.LyricsContainer},a.a.createElement("div",{className:d.a.LyricsBackground,style:{backgroundColor:l}}),u)};c.default=B},KluX:function(e,c,t){e.exports={LyricsContainer:"b56086d7efc662fc2ae909b1250b1ccf-scss",Loading:"bd27e81622385ae0018d697b7327781f-scss",LyricsUnavailablePage:"_9622e05bf027c9fd4ead1a4ed4820306-scss",UnsyncedLyricsPage:"de0b63fe7faec51ab83fb89243eddc9b-scss",LyricsUnsyncedMessage:"_569ac6929aa5e6a0b0613446bd49e9b2-scss",SyncedLyricsPage:"c54102ec979c5c7c5c98774b2e46384e-scss",LyricsBackground:"c11d361342402f1478bc9a338df2656e-scss",Provider:"_0087e03ded957cfbba5f781c4b923384-scss",SyncedLyrics:"_91b304c54e73736a27f3ba9912ee606f-scss",LyricsLine:"_86bf067ccb21eb43db8150f06bc973f5-scss",LyricsUnavailableMessage:"_0c6915cb1e936620146fc52c13992f01-scss"}}}]);