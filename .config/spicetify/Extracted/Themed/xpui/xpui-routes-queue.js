(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"47Ae":function(e,t,a){},H7bu:function(e,t,a){e.exports={container:"_228a6c18d885774ce6da9588dc5d6df7-scss",title:"_4d85d24a7888e789585c36d1df8c922b-scss",subTitle:"dfd3f6c5be5c3365b176d86b702f54c4-scss",contextLink:"c08d7ac77aad119eb2f6bb322fa7fff4-scss"}},IhfO:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return m}));var r=a("mXGw"),n=a.n(r),c=a("re7x"),s=a("9/hO"),i=a("wJTk"),l=a.n(i),o=a("CNRc");const u={[l.a.Type.ALBUM]:"text/x-spotify-albums",[l.a.Type.ARTIST]:"text/x-spotify-artists",[l.a.Type.COLLECTION_ALBUM]:"text/x-spotify-collection-albums",[l.a.Type.COLLECTION_ARTIST]:"text/x-spotify-collection-artists",[l.a.Type.DAILY_MIX]:"text/x-spotify-daily-mix",[l.a.Type.EPISODE]:"text/x-spotify-episodes",[l.a.Type.FOLDER]:"text/x-spotify-folders",[l.a.Type.LOCAL]:"text/x-spotify-tracks",[l.a.Type.LOCAL_ALBUM]:"text/x-spotify-albums",[l.a.Type.LOCAL_ARTIST]:"text/x-spotify-artists",[l.a.Type.PLAYLIST]:"text/x-spotify-playlists",[l.a.Type.PLAYLIST_V2]:"text/x-spotify-playlists",[l.a.Type.PROFILE]:"text/x-spotify-users",[l.a.Type.SHOW]:"text/x-spotify-shows",[l.a.Type.STATION]:"text/x-spotify-stations",[l.a.Type.TRACK]:"text/x-spotify-tracks"},d=({text:e})=>n.a.createElement(o.a,{as:"span",variant:o.a.ballad,dir:"auto"},e),m=(e=[],t="",a="")=>(r,i=e,o=t,m=a)=>{r.stopPropagation(),window.addEventListener("mouseover",()=>document.body.removeAttribute("data-dragging-type"),{once:!0});const b=i.map(e=>l.a.from(e)),p=b.map(e=>e.toOpenURL());if(0===b.length||r.metaKey)return void r.preventDefault();r.dataTransfer.setData("text/x-spotify-context",m),r.dataTransfer.setData("text/uri-list",p.join("\n")),r.dataTransfer.setData("text/plain",p.join("\n"));const f={};b.forEach(e=>{const t=u[e.type];f[t]?f[t].push(e):f[t]=[e]}),document.body.setAttribute("data-dragging-type",Object.keys(f).join(" "));for(const e in f){if(!f[e])continue;const t=f[e];r.dataTransfer.setData(e,t.join("\n"))}const k=Object(c.renderToString)(n.a.createElement(d,{text:o}));if("function"==typeof r.dataTransfer.setDragImage){const e=Object(s.a)(k);r.dataTransfer.setDragImage(e.element,0,0),e.remove()}}},MZuo:function(e,t,a){e.exports={nav:"_0e8005074dbda3fac5e3e0351fa82d97-scss",headerCentered:"d6ef1d453414ee43f5a3edc1dd983cc3-scss",headerItem:"_0787ecf44d56591be72b1f2c0e2f2320-scss",moreButton:"_1ee22b041204a058b2895bea552e2504-scss",moreButtonActive:"e2a5efd5c84a2cb9bdd6998a3b7ac0e0-scss",dropdownItemLink:"_324caa48310888b172e544a6ee04471e-scss",headerItemLink:"_43e978b8fbef3b1a5fc86ea29e51a0fd-scss",active:"a4bc298d40e9660cd25cd3ac1a7f9c49-scss",header:"_50d97b6270ce5e1b70d300348bc6b80d-scss",chevron:"_2773c2424ba6aa0d79b2c134b3efba22-scss"}},NQ5u:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const r=e=>{var t;return(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri}},OqJa:function(e,t,a){e.exports={tabBar:"eb0179b36e29c2b4f58be0569252f518-scss"}},SvoQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("U2jI"),n=a("oS2X");const c=({renderOldTracklist:e,renderNewTracklist:t})=>Object(r.b)(n.m)?t():e()},XhW5:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("mXGw"),n=a.n(r),c=a("xARA"),s=a("8Jek"),i=a.n(s),l=a("4Ye9"),o=a("WtcU"),u=a.n(o);const d=({children:e,className:t=""})=>{const{elementRef:a}=n.a.useContext(l.b),r=i()(u.a.topbarContent,t);return a?Object(c.createPortal)(n.a.createElement("div",{"data-testid":"topbar-content",className:r},e),a):null}},"gX+c":function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a("mXGw"),n=a.n(r),c=a("8Jek"),s=a.n(c),i=a("Rd0h"),l=a("hGjs"),o=a("YcB8"),u=a("MZuo"),d=a.n(u),m=a("CNRc");const b=n.a.memo(({isCentered:e,links:t,landmarkLabel:a,className:c,windowSize:u=1/0})=>{const[b,p]=Object(r.useState)(null),f=Object(r.useRef)(null),[k,y]=Object(r.useState)([]),[x,h]=Object(r.useState)(0),[E,T]=Object(r.useState)([]);Object(r.useEffect)(()=>{f.current&&h(f.current.clientWidth)},[u]),Object(r.useEffect)(()=>{if(!f.current)return;const e=Array.from(f.current.children).map(e=>e.clientWidth);y(e)},[t]),Object(r.useEffect)(()=>{if(!f.current)return;if(k.slice(0,-1).reduce((e,t)=>e+t,0)<=x)return void T([]);const e=k.reduce((e,t)=>e>t?e:t,0),t=[];let a=e;k.forEach((e,r)=>{x>=a+e?a+=e:t.push(r)}),T(t)},[x,k]);const v=Object(r.useCallback)(e=>!!e&&(p(null),!0),[]),g=Object(r.useCallback)((e,t)=>n.a.createElement("button",{className:s()(d.a.moreButton,{[d.a.moreButtonActive]:b}),type:"button",onClick:t,"aria-expanded":e},n.a.createElement(m.a,{as:"span",variant:m.a.mestoBold},b?b.title:l.b.get("more")),n.a.createElement("span",{className:s()(d.a.chevron,{"spoticon-chart-up-16":e,"spoticon-chart-down-16":!e})})),[b]),O=Object(r.useMemo)(()=>t.map((e,t)=>E.includes(t)?n.a.createElement(o.b,{exact:!0,className:d.a.dropdownItemLink,activeClassName:d.a.active,to:e.to,selected:e.itemId===(b&&b.itemId),isActive:t=>!!t&&(p(e),!0)},e.title):null),[E,t,b]);return n.a.createElement("nav",{className:s()(c,d.a.nav),"aria-label":a},n.a.createElement("ul",{className:e?d.a.headerCentered:d.a.header,ref:f},t.map((e,t)=>E.includes(t)?null:n.a.createElement("li",{key:e.to,className:d.a.headerItem},n.a.createElement(i.a,{exact:!0,className:d.a.headerItemLink,activeClassName:d.a.active,to:e.to,isActive:v},n.a.createElement(m.a,{variant:m.a.mestoBold},e.title)))),E.length||0===k.length?n.a.createElement("li",{className:d.a.headerItem},n.a.createElement(o.a,{items:O,render:g})):null))})},jLHC:function(e,t,a){"use strict";a.r(t),a.d(t,"QueueHistoryRoutes",(function(){return te}));var r=a("mXGw"),n=a.n(r),c=a("oNR1"),s=a("SvoQ"),i=(a("W0B4"),a("cnbf")),l=a("/m4v"),o=(a("47Ae"),a("UF+5")),u=a("MPY0"),d=a("hGjs"),m=a("/0yG");class b extends r.PureComponent{render(){const{current:e,queued:t,next:a,playbackState:r,isFetching:c}=this.props,s=r&&r.contextURI,i=t&&!!t.length,l=a&&!!a.length,b=!1===c&&!1===(s&&(e||i||l));return n.a.createElement("section",{className:"content Queue contentSpacing"},n.a.createElement(o.a,null,d.b.get("queue.title")),b&&n.a.createElement("p",{className:"Queue--empty"},d.b.get("queue.no-more-tracks")),s&&e&&n.a.createElement("div",null,n.a.createElement(o.a,{isSubheader:!0},d.b.get("queue.now-playing")),n.a.createElement(m.b,{value:"now-playing"},n.a.createElement(u.a,{contextURI:s,playbackState:this.props.playbackState,tracks:[e],forceShowAlbumAndArtists:!0}))),s&&i&&n.a.createElement("div",null,n.a.createElement(o.a,{isSubheader:!0},d.b.get("queue.next-in-queue")),n.a.createElement(m.b,{value:"next-in-queue"},n.a.createElement(u.a,{contextURI:s,playbackState:{},tracks:t,forceShowAlbumAndArtists:!0,isPlayable:!1}))),s&&l&&n.a.createElement("div",null,n.a.createElement(o.a,{isSubheader:!0},d.b.get("queue.next-up")),n.a.createElement(m.b,{value:"next-up"},n.a.createElement(u.a,{contextURI:s,playbackState:{},tracks:a,forceShowAlbumAndArtists:!0,isPlayable:!1}))))}}var p=b,f=a("kpsr"),k=a("odWe"),y=a("f66B"),x=a.n(y),h=a("7A1p");class E extends r.PureComponent{componentDidMount(){const{currentTrackUri:e,nextTracks:t,currentTrack:a,onSetDefaultBackgroundColor:r,onSetDocumentTitle:n,onRequestDecoratedQueue:c}=this.props;r(),n(d.b.get("queue.page-title")),(e||t.length)&&c({currentTrack:a,nextTracks:t})}componentDidUpdate(e){const{currentTrackUri:t,currentTrack:a,nextTracks:r,onRequestDecoratedQueue:n}=this.props,{currentTrackUri:c,nextTracks:s}=e;c===t&&s.length===r.length&&!1!==s.every((e,t)=>e.uri===r[t].uri)||n({currentTrack:a,nextTracks:r})}render(){const{playbackState:e,currentDecoratedTrack:t,queuedDecoratedTracks:a,nextDecoratedTracks:r}=this.props;return n.a.createElement(p,{playbackState:e,current:t,queued:a,next:r})}}var T=Object(l.b)(e=>{const t=Object(h.b)(e),{currentTrackUri:a,nextTracks:r,currentTrack:n,currentDecoratedTrack:c,queuedDecoratedTracks:s,nextDecoratedTracks:i,isFetching:l}=e.playback.queue||{};return{playbackState:t,currentTrackUri:a,nextTracks:r,currentTrack:n,currentDecoratedTrack:c,queuedDecoratedTracks:s,nextDecoratedTracks:i,isFetching:l}},e=>Object(i.b)({onSetDefaultBackgroundColor:k.H,onSetDocumentTitle:k.I,onRequestDecoratedQueue:f.N},e),null,{pure:!0,areStatePropsEqual:(e,t)=>e.currentTrackUri===t.currentTrackUri&&(e.currentDecoratedTrack&&e.currentDecoratedTrack.uri)===(t.currentDecoratedTrack&&t.currentDecoratedTrack.uri)&&e.nextTracks.length===t.nextTracks.length&&e.queuedDecoratedTracks.length===t.queuedDecoratedTracks.length&&e.nextDecoratedTracks.length===t.nextDecoratedTracks.length&&x()(e.playbackState,t.playbackState)&&e.nextTracks.every((e,a)=>e.uri===t.nextTracks[a].uri)&&e.queuedDecoratedTracks.every((e,a)=>e.uri===t.queuedDecoratedTracks[a].uri)&&e.nextDecoratedTracks.every((e,a)=>e.uri===t.nextDecoratedTracks[a].uri)})(E),v=a("eI+U"),g=a("CNRc"),O=a("dwV8"),w=a("sJDK"),j=a.n(w),D=a("WOxI"),S=a("/xDC"),A=a("OvAC"),L=a.n(A),I=a("wJTk"),N=a.n(I),q=a("skl0"),U=a("YktH");function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){L()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const _=[],P=[];var B=a("zGR3");let M;!function(e){e.Track="track",e.Artist="artist",e.Show="show",e.Episode="episode",e.Album="album",e.Playlist="playlist"}(M||(M={}));var F=a("3sMm");const G=n.a.memo(({items:e})=>{const t=function(e){const[t,a]=Object(r.useState)({});return Object(r.useEffect)(()=>{const r=Array.from(new Set(e)),n=r.filter(e=>N.a.isTrack(e)&&!t[e]),c=r.filter(e=>N.a.isEpisode(e)&&!t[e]),s=n.length?q.t.getTracks(U.a.getInstance(),n.map(e=>N.a.from(e).getBase62Id())).then(e=>{var t;return(null==e||null===(t=e.body)||void 0===t?void 0:t.tracks)||_}):Promise.resolve(_),i=c.length?q.q.getEpisodesGraphQL(U.a.getInstance(),c.map(e=>N.a.from(e).getBase62Id())).then(e=>(null==e?void 0:e.body)||P):Promise.resolve(P);Promise.all([s,i]).then(([e,t])=>{const r={},n={};e.forEach(e=>{var t;r[(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri]=e}),t.forEach(e=>{n[e.uri]=e}),(e.length>0||t.length>0)&&a(e=>C(C(C({},e),r),n))})},[e,t]),e.map(e=>t[e])}(e.map(e=>e.uri)).map((t,a)=>e[a].type===B.a.LOCAL?e[a]:t),a=Object(r.useCallback)((e,t)=>{if(e.type===M.Track){var a;const r=Object(F.a)(null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40});return n.a.createElement(S.d,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration_ms,imgUrl:(null==r?void 0:r.url)||"",album:e.album,artists:e.artists,isExplicit:e.explicit,isMOGEFRestricted:e.tags.includes("MOGEF-19+"),type:B.a.TRACK})}var r,c;if((e=>e.type===M.Episode)(e)){var s;const a=Object(F.a)(null===(s=e.show)||void 0===s?void 0:s.images,{desiredSize:40});return n.a.createElement(S.d,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration_ms,imgUrl:(null==a?void 0:a.url)||"",album:{name:e.show.name,uri:e.show.uri},artists:[{name:e.show.publisher,uri:""}],isExplicit:e.explicit,isMOGEFRestricted:!1,type:B.a.EPISODE})}return(e=>e.type===B.a.LOCAL)(e)?n.a.createElement(S.d,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration,imgUrl:e.imageUrl||"",album:{name:(null===(r=e.album)||void 0===r?void 0:r.name)||"",uri:""},artists:[{name:(null===(c=e.artist)||void 0===c?void 0:c.name)||"",uri:""}],isExplicit:e.isExplicit,isMOGEFRestricted:!1,type:B.a.LOCAL}):n.a.createElement(D.n,{height:D.j+"px"})},[]);return n.a.createElement(n.a.Fragment,null,n.a.createElement(m.b,{value:"play-history-tracklist"},n.a.createElement(D.q,{ariaLabel:"play-history",hasHeaderRow:!0,columns:[D.d.TITLE,D.d.ALBUM_OR_PODCAST,D.d.DURATION],renderRow:a,resolveUri:e=>e.uri,tracks:t,nrTracks:t.length,rowPlaceholder:D.n,limit:50})))}),Q=()=>{const e=Object(O.c)();return n.a.createElement("div",{className:j.a.container},n.a.createElement(g.a.h1,{variant:g.b.canon,color:v.color.white,className:j.a.title},d.b.get("queue.history")),e&&e.items.length>0?n.a.createElement(G,{items:e.items}):null)};var W=a("NQ5u");const X=n.a.memo(({tracks:e,ariaLabel:t,contextUri:a,rowNumberOffset:c=0})=>{const s=Object(r.useCallback)((e,t)=>{if(m=e,N.a.isEpisode(m.uri)){var r;const s=Object(F.a)(null===(r=e.show)||void 0===r?void 0:r.images,{desiredSize:40});return n.a.createElement(D.i,{key:t+c+e.uid,index:t,rowNumberOffset:c,imgUrl:(null==s?void 0:s.url)||"",uri:Object(W.a)(e),uid:e.uid,contextUri:a,duration_ms:e.duration_ms,name:e.name,artists:[{name:e.show.publisher,uri:""}],album:{name:e.show.name,uri:e.show.uri},isExplicit:e.explicit,isPlayable:e.is_playable,isMOGEFRestricted:!1,type:D.h.EPISODE})}if((e=>N.a.isTrack(e.uri))(e)){var s;const r=Object(F.a)(null==e||null===(s=e.album)||void 0===s?void 0:s.images,{desiredSize:40});return n.a.createElement(D.i,{key:t+c+e.uid,index:t,rowNumberOffset:c,imgUrl:(null==r?void 0:r.url)||"",uri:Object(W.a)(e),uid:e.uid,contextUri:a,duration_ms:e.duration_ms,name:e.name,artists:e.artists,album:e.album,isExplicit:e.explicit,isPlayable:e.is_playable,isMOGEFRestricted:(e.tags||[]).includes("MOGEF-19+"),type:D.h.TRACK})}var i,l,o,u,d,m;return(e=>N.a.isLocalTrack(e.uri))(e)?n.a.createElement(D.i,{key:t+c+e.uid,index:t,rowNumberOffset:c,imgUrl:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.image_url)||"",uri:e.uri,uid:e.uid,contextUri:a,duration_ms:parseInt(null==e||null===(l=e.metadata)||void 0===l?void 0:l.duration,10)||0,name:null==e||null===(o=e.metadata)||void 0===o?void 0:o.title,artists:[{name:null==e||null===(u=e.metadata)||void 0===u?void 0:u.artist_name,uri:""}],album:{name:null==e||null===(d=e.metadata)||void 0===d?void 0:d.album_title,uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:D.h.LOCAL}):n.a.createElement(D.l,{height:D.j+"px"})},[c,a]);return e&&n.a.createElement(D.q,{ariaLabel:t,tracks:e,nrTracks:e.length,renderRow:s,resolveUri:e=>e.uri,columns:[D.d.INDEX,D.d.TITLE,D.d.ALBUM,D.d.DURATION]})});var J=a("H7bu"),H=a.n(J);const Y=()=>{const{currentTrack:e,nextTracks:t,currentDecoratedTrack:a,queuedDecoratedTracks:c,nextDecoratedTracks:s,isFetching:i}=Object(l.d)(h.g)||{},{contextURI:o}=Object(l.d)(h.b),u=Object(l.c)();Object(r.useEffect)(()=>{u(Object(f.N)({currentTrack:e,nextTracks:t}))},[u,e,t]),Object(r.useEffect)(()=>{u(Object(k.H)()),u(Object(k.I)(d.b.get("queue.page-title")))},[u]);const b=!!(null==c?void 0:c.length),p=!!(null==s?void 0:s.length),y=!1===i&&!1===(a||b||p);return n.a.createElement("section",{className:H.a.container},n.a.createElement(g.a.h1,{variant:g.b.canon,color:v.color.white,className:H.a.title},d.b.get("playback-control.queue")),y&&n.a.createElement("p",{className:"Queue--empty"},d.b.get("queue.no-more-tracks")),a&&o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a.h2,{variant:g.b.balladBold,color:v.color.gray70,className:H.a.subTitle},d.b.get("queue.now-playing")),n.a.createElement(m.b,{value:"now-playing"},n.a.createElement(X,{ariaLabel:d.b.get("queue.now-playing"),tracks:[a],contextUri:o}))),b&&o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a.h2,{variant:g.b.balladBold,color:v.color.gray70,className:H.a.subTitle},d.b.get("queue.next-in-queue")),n.a.createElement(m.b,{value:"next-in-queue"},n.a.createElement(X,{ariaLabel:d.b.get("queue.next-in-queue"),tracks:c||[],rowNumberOffset:1,contextUri:o}))),p&&o&&n.a.createElement(n.a.Fragment,null,n.a.createElement(g.a.h2,{variant:g.b.balladBold,color:v.color.gray70,className:H.a.subTitle},d.b.get("queue.next-up")),n.a.createElement(m.b,{value:"next-up"},n.a.createElement(X,{ariaLabel:d.b.get("queue.next-up"),tracks:s||[],rowNumberOffset:1+((null==c?void 0:c.length)||0),contextUri:o}))))};var z=a("uf0Y"),K=a("gX+c"),V=a("XhW5"),Z=a("OqJa"),$=a.n(Z);const ee=()=>{const[e,t]=Object(r.useState)(window.innerWidth);Object(z.a)(()=>{t(window.innerWidth)});const a=Object(r.useMemo)(()=>[{title:d.b.get("playback-control.queue"),itemId:"queue",to:"/queue"},{title:d.b.get("queue.history"),itemId:"history",to:"/history"}],[]);return n.a.createElement(V.a,null,n.a.createElement(K.a,{className:$.a.tabBar,links:a,windowSize:e}))},te=()=>{const e=Object(O.b)();return n.a.createElement("section",{className:"contentSpacing"},e&&n.a.createElement(c.b,{path:"/history"},n.a.createElement(Q,null)),n.a.createElement(c.b,{path:"/queue"},n.a.createElement(r.Suspense,{fallback:null},n.a.createElement(s.a,{renderOldTracklist:()=>n.a.createElement(T,null),renderNewTracklist:()=>n.a.createElement(Y,null)}))),e&&n.a.createElement(ee,null))};t.default=te},sJDK:function(e,t,a){e.exports={container:"_820f7340af1a89fcd7ac709b86ab8912-scss",title:"fdca66a91ac0a835b7e00d3680e61362-scss"}}}]);