(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{"2P/v":function(e,t,n){e.exports={content:"d49f9112c35efefc148f9b0117ff5682-scss",title:"ea808ed7ca7ccc2fc34f5ebc41e0cdef-scss"}},"5jG6":function(e,t,n){"use strict";n.r(t);var a=n("odWe"),r=n("kpsr"),s=n("/m4v"),l=n("mXGw"),o=n.n(l),i=n("8Jek"),c=n.n(i),u=n("wJTk"),d=n.n(u),m=n("MZBX"),p=n("2P/v"),b=n.n(p),h=n("Uj61"),f=n("qOe9"),y=n("NTQj"),v=n("B9Xw"),g=n("hGjs"),w=n("CBg4"),E=n("9ttr"),k=n("CNRc");const O=e=>{const{viewData:t,onSetDefaultBackgroundColor:n,onRequestRecentlyPlayed:a,isFullyLoaded:r,onRequestRecentlyPlayedViewMore:s,showAll:i,items:u,onRequestAlbum:p,onRequestPlaylist:O,onRequestArtist:A,onRequestShow:j}=e,R=Object(l.useCallback)(()=>{!document.hidden&&navigator.onLine&&a()},[a]);Object(l.useEffect)(()=>(n(),R(),window.addEventListener("visibilitychange",R),window.addEventListener("online",R),()=>{window.removeEventListener("visibilitychange",R),window.removeEventListener("online",R)}),[n,R]),Object(m.a)(()=>{!function({items:e,onRequestAlbum:t,onRequestPlaylist:n,onRequestArtist:a,onRequestShow:r}){e.filter(w.d).forEach(({uri:e})=>{const s=d.a.from(e);if(s)switch(s.type){case d.a.Type.ALBUM:t(e);break;case d.a.Type.PLAYLIST:case d.a.Type.PLAYLIST_V2:n(e);break;case d.a.Type.ARTIST:a(e);break;case d.a.Type.SHOW:r(s.getBase62Id())}})}({items:u,onRequestAlbum:p,onRequestPlaylist:O,onRequestArtist:A,onRequestShow:j})},[u,p,O,A,j]);const I=Object(l.useCallback)(()=>{r||s()},[r,s]);if(!t)return null;const C=t.content.next?Object(y.a)(Object(y.d)(t.href)):void 0,P=u.filter(w.c),S=g.b.get("view.recently-played");return i?o.a.createElement("section",{className:c()("contentSpacing",b.a.content)},o.a.createElement(k.a,{as:"h1",variant:k.a.canon,className:b.a.title},S),o.a.createElement(E.a,{onReachBottom:I},o.a.createElement(h.a,{entities:P}))):o.a.createElement(v.b,{total:t.content.total,seeAllUri:C,pageId:"desktop-home",title:S,tagline:t.tag_line},P.map(e=>{const t=Object(f.a)(e.uri);return o.a.createElement(t,{key:e.uri,entity:e})}))};O.defaultProps={showAll:!0,items:[]};var A=n("USNj");const j={onRequestRecentlyPlayed:r.Eb,onRequestRecentlyPlayedViewMore:r.Hb,onSetDefaultBackgroundColor:a.H,onRequestAlbum:r.a,onRequestPlaylist:r.mb,onRequestArtist:r.g,onRequestShow:r.Ib};t.default=Object(s.b)(e=>{const t=e.entities.views["recently-played"];return{viewData:t,isFullyLoaded:!t||null===t.content.next,items:Object.values(e.playbackHistory.contexts.map(({uri:t})=>{const n=Object(A.f)(t,e);return n?Object(w.a)(n):Object(w.b)({uri:t})}).concat(t?t.content.items:[]).reduce((e,t)=>(e[t.uri]=t,e),{})).sort((e,t)=>t.lastPlayedTime-e.lastPlayedTime)}},j)(O)},B9Xw:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var a=n("mXGw"),r=n.n(a),s=n("8Jek"),l=n.n(s),o=n("a4DE"),i=n.n(o),c=n("pAAZ"),u=n("8I+N"),d=n("ChMR"),m=n("fF1i"),p=n("CNRc"),b=n("GHIz");const h=r.a.memo(({title:e,tagline:t,children:n,seeAllUri:s,showAll:o,className:d="",total:m,pageId:h,seeAllLabel:f})=>{const y=Object(a.useCallback)(a=>{const l=m>a&&s&&!o;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:i.a.header},r.a.createElement("div",{className:i.a.topRow},r.a.createElement("div",{className:i.a.titleWrapper},l?r.a.createElement(p.a,{as:"h2",variant:p.a.canon},r.a.createElement(u.a,{to:s||"",pageId:h,className:i.a.title},e)):r.a.createElement(p.a,{as:"h2",variant:p.a.canon,className:i.a.title},e)),l&&r.a.createElement(b.a,{link:s||"",className:i.a.seeAll,pageId:h,label:f})),t&&r.a.createElement("p",null,t)),o?n:Array.isArray(n)&&n.filter((e,t)=>t<a))},[m,s,o,n,h,t,e,f]);return Array.isArray(n)&&0===n.length?null:r.a.createElement("section",{className:l()(d,i.a.shelf),"aria-label":e},r.a.createElement(c.a,{className:l()(i.a.shelfGrid,{[i.a.showAll]:o}),columnAware:!0,render:y}))}),f=Object(d.b)(h,()=>null,e=>Object(m.a)({from:"Shelf",error:e}))},GHIz:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("mXGw"),r=n.n(a),s=n("8Jek"),l=n.n(s),o=n("8I+N"),i=n("CNRc"),c=n("hGjs"),u=n("iEWP"),d=n.n(u);const m=r.a.memo(e=>{const{link:t,pageId:n,className:a,label:s}=e;return r.a.createElement(o.b,{to:t,className:l()(d.a.link,a),pageId:n},r.a.createElement(i.a,{as:"span",variant:i.a.minuetBold},s||c.b.get("search.see-all")))})},N4gG:function(e,t,n){e.exports={header:"_068730ef9c099df297fad5dde198f472-scss",content:"_3322232c257ef2df0a96ea2e460a5d25-scss",genreContent:"cb058aaa130f94dc530397320e704de2-scss"}},Uj61:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("mXGw"),r=n.n(a),s=n("/0yG"),l=n("qOe9"),o=n("pAAZ");const i=({entities:e=[]})=>0===e.length?null:r.a.createElement(s.b,{value:"EntitiesGrid"},r.a.createElement(o.a,{render:()=>e.map((e,t)=>{const n=Object(l.a)(e.uri);return r.a.createElement(s.b,{key:e.uri,value:"card",index:t},r.a.createElement(n,{entity:e}))})}))},a4DE:function(e,t,n){e.exports={shelf:"a8b052ab945f8d056679d7f3ff013e05-scss",header:"_4e5e81e75ea1c55d3c6b7130e90b4e45-scss",topRow:"_25ab18ebaa7323427b6a3ae748b2fdaa-scss",titleWrapper:"bd50070f7e4ffa804d8ad9fb0966c344-scss",title:"c65f5ba184497ced74470e887c6a95c3-scss",seeAll:"_2b16a62ab5b3e84f23b77433b9a5f0f5-scss",shelfGrid:"_6424f268be3505ebab663700d60ebaa6-scss",showAll:"_7321ea8cd8e8baded34054347ab0be48-scss"}},iEWP:function(e,t,n){e.exports={link:"_03c8a5d5aecfd3620383a75c995c96a2-scss"}},uTSb:function(e,t,n){"use strict";n.r(t),n.d(t,"ViewContainer",(function(){return G}));var a=n("OvAC"),r=n.n(a),s=n("mXGw"),l=n.n(s),o=n("8Jek"),i=n.n(o),c=n("9ttr"),u=n("odWe"),d=n("kpsr"),m=n("/m4v"),p=n("f+XK"),b=n("/0yG"),h=n("N4gG"),f=n.n(h),y=n("IHlA"),v=n("5jG6"),g=n("B9Xw"),w=n("qOe9"),E=n("IaME"),k=n("zKkN"),O=n("0QmJ"),A=n("AlYL"),j=n("hGjs"),R=n("NTQj"),I=n("OaJ5"),C=n("tX91"),P=n("oCOB"),S=n("cnbf"),q=n("7A1p");function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const N={setDocumentTitle:u.I,onSetBackgroundColor:u.F,onSetDefaultBackgroundColor:u.H,onRequestView:d.dc,onRequestItemsStyle:y.browseItemsStyleRequest,onRequestViewMore:d.fc,playInspiredByMix:O.o,playContext:O.l,pause:O.i,resume:O.y};class G extends s.PureComponent{constructor(...e){super(...e),r()(this,"handleLoadMore",()=>{const{viewData:e,viewId:t,onRequestViewMore:n,isFullyLoaded:a}=this.props;if(!e)return;const r=this.disallowInfiniteScroll(e);a||r||n(t)}),r()(this,"setBackground",()=>{const{viewData:e,onSetBackgroundColor:t,onSetDefaultBackgroundColor:n,backgroundColor:a}=this.props;e&&Array.isArray(e.content.items)&&(this.shouldRenderHeader(e)?t(a,null):n())}),r()(this,"isHeader",e=>"HEADER"===e.rendering),r()(this,"shouldRenderHeader",e=>{const{isGenre:t}=this.props;return t||Boolean(this.getHeaderTitle(e))}),r()(this,"renderHeader",(e,t=[],n)=>{if(!e)return null;const a=t.filter(e=>"background"===e.name);return l.a.createElement(I.b,{backgroundImages:a,backgroundColor:n,size:0===a.length?I.c.SMALL:I.c.DEFAULT},l.a.createElement(C.a,null,l.a.createElement(P.a,{text:e})),l.a.createElement(I.d,null,l.a.createElement(I.h,null,e)))}),r()(this,"renderCard",(e,t)=>{const n=Object(w.a)(e.uri);return l.a.createElement(b.a,{key:e.uri||t,value:"card",index:t},l.a.createElement(n,{entity:e}))}),r()(this,"renderLink",e=>{let t=e.uri;e.href.indexOf("https://api.spotify.com/v1/views/")>-1&&(t=e.href.replace("https://api.spotify.com/v1/views/","spotify:genre:"),"-page"!==t.substr(-5)&&(t+="-page"),"hub-browse-grid"===this.props.viewId&&(t=t.replace(":view:",":genre:")));const n=Object(w.a)(t);return l.a.createElement(n,{key:e.href,entity:D(D({},e),{},{uri:t})})}),r()(this,"renderEntity",(e,t)=>{switch(e.type){case"link":return this.renderLink(e);default:return this.renderCard(e,t)}})}componentDidMount(){const{viewData:e,viewId:t,country:n}=this.props;!n||e&&"POP"===this.props.history.action||!t||this.requestContent(t,n),this.props.setDocumentTitle(null==e?void 0:e.name),this.setBackground()}componentDidUpdate(e){const{viewData:t,viewId:n,country:a}=this.props,{viewId:r,viewData:s}=e,l=n!==r;a&&!t&&l&&n&&this.requestContent(n,a),!t||s&&!l||(this.props.setDocumentTitle(null==t?void 0:t.name),this.setBackground())}disallowInfiniteScroll(e){return[/desktop-home/,/ginger-genre-affinity/].some(t=>e&&e.href&&e.href.match(t))}requestContent(e,t){const{onRequestView:n,onRequestItemsStyle:a}=this.props;n(e,t),a()}getHeaderSpace(e){const{content:{items:t=[]}={}}=e||{},n=t.filter(this.isHeader);return n.length>0?n[0]:null}getHeaderTitle(e){const{backgroundColor:t}=this.props,{name:n}=e||{},a=this.getHeaderSpace(e);return a?a.name:t&&n}render(){var e;const{viewData:t,viewId:n,playbackState:a,playInspiredByMix:r,playContext:s,pause:o,resume:u,isGenre:d,isAnonymous:m}=this.props,p={currentlyPlayingUri:(null==a?void 0:a.currentlyPlayingUri)||"",inpiredByMixSeed:(null==a?void 0:a.inpiredByMixSeed)||{},isPlaybackPlaying:(null==a?void 0:a.isPlaybackPlaying)||!1,playContext:s,playInspiredByMix:r,pause:o,resume:u},h=this.getHeaderSpace(t)||{name:this.getHeaderTitle(t),images:[]},y=this.renderHeader(h.name,h.images,this.props.backgroundColor),w=null==t?void 0:t.content.items,O=this.shouldRenderHeader(t);return l.a.createElement(E.b.Provider,{value:p},t?l.a.createElement(c.a,{onReachBottom:this.handleLoadMore},l.a.createElement("section",{className:i()({[f.a.header]:y})},O&&y,O&&y&&l.a.createElement(k.a,{backgroundColor:this.props.backgroundColor}),l.a.createElement("div",{className:i()(f.a.content,"contentSpacing",{[f.a.genreContent]:d})},(null==w||null===(e=w[0])||void 0===e?void 0:e.content)?w.filter(e=>!this.isHeader(e)&&e.content.total>0).map((e,t)=>{const a=e.content&&Object(R.a)(Object(R.d)(e.href));return m&&"uniquely-yours-shelf"===e.id?null:l.a.createElement(b.a,{value:"headered-grid",index:t,key:e.id},"recently-played"===e.id?l.a.createElement(v.default,{showAll:!1}):l.a.createElement(g.b,{total:e.content.total,seeAllUri:a,pageId:n,title:e.name,tagline:e.tag_line||void 0},e.content.items.map(this.renderEntity)))}):l.a.createElement(b.a,{value:"headered-grid"},l.a.createElement(g.b,{showAll:!0,title:t.name||"",total:(null==w?void 0:w.length)||0},(null==w?void 0:w.map(this.renderEntity))||null))))):l.a.createElement(A.a,{errorMessage:j.b.get("error.not_found.title.page")}))}}t.default=Object(m.b)((e,t)=>{var n,a,r,s,l,o,i;const c=t.viewId||t.match.params.viewId,u=e.entities.views[c]||null,d=!u||null===u.content.next,m="-page"!==c.substr(-5)?c+"-page":c,b=(null===(n=e.browse.allItemsStyle)||void 0===n||null===(a=n[m])||void 0===a?void 0:a.color)||"",h=null==e||null===(r=e.session)||void 0===r?void 0:r.isAnonymous,f=e=>e.viewId===c||"href"in e&&e.href===Object(R.a)(c),y=(null==e||null===(s=e.browse)||void 0===s||null===(l=s.browseAll)||void 0===l?void 0:l.items.some(f))||(null==e||null===(o=e.browse)||void 0===o||null===(i=o.topGenres)||void 0===i?void 0:i.items.some(f))||!!b;return{playbackState:Object(q.b)(e),viewData:u,isFullyLoaded:d,viewId:c,backgroundColor:b,country:Object(p.a)(e),isGenre:y,isAnonymous:h}},e=>Object(S.b)(N,e))(G)}}]);